\documentclass[a4paper,10pt,twoside,openright]{book}

\bibliographystyle{plain}

\usepackage{hyperref}
\usepackage{xspace}
\usepackage{todonotes}
\usepackage{amsmath,amsthm,amssymb,stmaryrd}
\usepackage{cleveref} % load cleveref /after/ amsthm to distinguish between different theorem headings
\usepackage{bbold} % for blackboard bold numeral 1
\usepackage{url}
\usepackage[pdftex, all]{xy}
\usepackage{environ} % for data type decl environment, since align* doesn't play nice with newenvironment
\usepackage{xifthen} % for data type decl hackery, detect empty parameters

% TODOs
\newcommand{\todoi}[1]{\todo[inline]{#1}}

\newcommand{\eg}{e.g.\xspace}
\newcommand{\ie}{i.e.\xspace}

% Propositions, theorems, corollaries, etc.
\newtheorem{theorem}{Theorem}[section]
\newtheorem{proposition}[theorem]{Proposition}
\newtheorem{lemma}[theorem]{Lemma}
\theoremstyle{definition}
\newtheorem{definition}[theorem]{Definition}
\theoremstyle{remark}
\newtheorem{remark}[theorem]{Remark}
\newtheorem{example}[theorem]{Example}

% Agda-style syntax highlighting
\newcommand{\AgdaKeyword}[1]{\textcolor[HTML]{CD6600}{\mathbf{#1}}}
\newcommand{\AgdaDatatype}[1]{\textcolor[HTML]{0033CD}{#1}}
\newcommand{\AgdaInductiveConstructor}[1]{\textcolor[HTML]{008B00}{#1}}
\newcommand{\AgdaPrimitiveType}[1]{\textcolor[HTML]{0000CD}{#1}}
\newcommand{\AgdaFunction}[1]{\textcolor[HTML]{0000CD}{#1}}

% Keywords
\newcommand{\data}{\AgdaKeyword{data}}
\newcommand{\where}{\AgdaKeyword{where}}

% Primitives
\newcommand{\unitty}{\AgdaPrimitiveType{1}}
\newcommand{\unitval}{\AgdaFunction{\mathsf{tt}}}

% Universes
\newcommand{\Set}{\AgdaPrimitiveType{\mathsf{Set}}}
\newcommand{\Type}{\AgdaPrimitiveType{\mathsf{Type}}}
\newcommand{\Prop}{\AgdaPrimitiveType{\mathsf{Prop}}}
\newcommand{\Fam}{\AgdaFunction{\mathsf{Fam}}}
\newcommand{\Rel}{\AgdaFunction{\mathsf{Rel}}}

% Equational reasoning
\newcommand{\reasontext}[1]{\{\ \textsf{#1}\ \}}

% Data type declaration environment and commands
\newcommand{\sortname}[1]{&\data\ #1}
\newcommand{\sortnamety}[2]{\sortname{#1} : #2}
\newcommand{\functy}[2]{&#1 : #2}
\newcommand{\constr}[2]{&\ \ \ \ #1 : #2}

\NewEnviron{datatype}[2]{%
  \begin{align*}
    \ifthenelse{\equal{#2}{}}{\sortname{#1}}{\sortnamety{#1}{#2}}\ \where \\
    \BODY
  \end{align*}}

\NewEnviron{sorts}{%
  \begin{align*}
    \BODY
  \end{align*}}

% Logical equivalence
\newcommand{\logequiv}{\leftrightarrow}

% Equality and its operations
\newcommand{\pathover}[4]{#3 =^{#1}_{#2} #4}
\newcommand{\ap}{\AgdaFunction{\mathsf{ap}}}
\newcommand{\apd}{\AgdaFunction{\mathsf{apd}}}
\newcommand{\transport}{\AgdaFunction{\mathsf{transport}}}
\newcommand{\defeq}{\equiv}
\newcommand{\ddefeq}{:\defeq}

% is-prop, is-equiv, etc.
\newcommand{\isequiv}{\AgdaFunction{\mathsf{is-equiv}}}

% Naturals
\newcommand{\natty}{\AgdaDatatype{\mathbb{N}}}
\newcommand{\natzero}{\AgdaInductiveConstructor{\mathsf{zero}}}
\newcommand{\natsucc}{\AgdaInductiveConstructor{\mathsf{succ}}}

% Interval type
\newcommand{\intty}{\AgdaDatatype{\mathsf{I}}}
\newcommand{\intzero}{\AgdaInductiveConstructor{\mathsf{zero}}}
\newcommand{\intone}{\AgdaInductiveConstructor{\mathsf{one}}}
\newcommand{\intseg}{\AgdaInductiveConstructor{\mathsf{seg}}}

\newcommand{\intrec}{\AgdaFunction{\mathsf{I-rec}}}
\newcommand{\intrecbetazero}{\AgdaFunction{\mathsf{I-rec-\beta}}_{\intzero}}
\newcommand{\intrecbetaone}{\AgdaFunction{\mathsf{I-rec-\beta}}_{\intone}}
\newcommand{\intrecbetaseg}{\AgdaFunction{\mathsf{I-rec-\beta}}_{\intseg}}

\newcommand{\intind}{\AgdaFunction{\mathsf{I-ind}}}

% Quotient type
\newcommand{\quotty}[2]{#1 \AgdaDatatype{/} #2}
\newcommand{\quotproj}[1]{\AgdaInductiveConstructor{[}\,#1\,\AgdaInductiveConstructor{]}}
\newcommand{\quoteq}{\AgdaInductiveConstructor{q}}

\newcommand{\quotind}[2]{\AgdaFunction{\mathsf{#1 / #2 -ind}}}

% Coequaliser
\newcommand{\coeqty}[2]{\AgdaDatatype{\mathsf{coeq}}_{#1, #2}}
\newcommand{\coeqproj}{\AgdaInductiveConstructor{c}}
\newcommand{\coeqeq}{\AgdaInductiveConstructor{\mathsf{eq}}}

\newcommand{\coeqind}[2]{\AgdaDatatype{\mathsf{coeq}}\ #1\ #2 -ind}

% Infinitely branching tree
\newcommand{\treety}{\AgdaDatatype{\mathsf{Tree}}}
\newcommand{\treeleaf}{\AgdaInductiveConstructor{\mathsf{leaf}}}
\newcommand{\treenode}{\AgdaInductiveConstructor{\mathsf{node}}}
\newcommand{\treeperm}{\AgdaInductiveConstructor{\mathsf{perm}}}

\newcommand{\pretreety}{\AgdaDatatype{\mathsf{Tree}_0}}
\newcommand{\pretreeleaf}{\AgdaInductiveConstructor{\mathsf{leaf}_0}}
\newcommand{\pretreenode}{\AgdaInductiveConstructor{\mathsf{node}_0}}

\newcommand{\treerel}{\sim}
\newcommand{\treerelty}[2]{#1 \AgdaDatatype{\treerel} #2}
\newcommand{\treerelnode}{\AgdaInductiveConstructor{\mathsf{rel-node}}}

% Syntax of type theory
\newcommand{\ttconty}{\AgdaDatatype{\mathsf{Con}}}
\newcommand{\tttyty}{\AgdaDatatype{\mathsf{Ty}}}

\newcommand{\ttnil}{\AgdaInductiveConstructor{\epsilon}}
\newcommand{\ttcons}[2]{#1 \AgdaInductiveConstructor{,} #2}

\newcommand{\ttzero}{\AgdaInductiveConstructor{`0}}
\newcommand{\ttone}{\AgdaInductiveConstructor{`1}}
\newcommand{\ttpi}{\AgdaInductiveConstructor{`\Pi}}

\newcommand{\tttmty}{\AgdaDatatype{\mathsf{Tm}}}
\newcommand{\ttapp}{\AgdaInductiveConstructor{\mathsf{app}}}
\newcommand{\ttlam}{\AgdaInductiveConstructor{\mathsf{lam}}}

% Arbitrary inductive type T
\newcommand{\Tty}{\AgdaDatatype{T}}
\newcommand{\Ta}{\AgdaInductiveConstructor{a}}
\newcommand{\Tb}{\AgdaInductiveConstructor{b}}

% Families
\newcommand{\total}{\AgdaFunction{\mathsf{total}}}
\newcommand{\proj}{\AgdaFunction{\mathsf{proj}}}

% Categories
\newcommand{\Cat}{\mathsf{Cat}}
\newcommand{\Cc}{\mathcal{C}}
\newcommand{\Dd}{\mathcal{D}}
\newcommand{\id}{\mathsf{id}}
\newcommand{\algcat}[1]{#1\mathsf{-alg}}
\newcommand{\dialgcat}[2]{(#1,#2)\mathsf{-dialg}}
\newcommand{\termcat}{\mathbb{1}}
\newcommand{\Func}[2]{#1 \Rightarrow #2}

% Sorts
\newcommand{\sortsty}{\AgdaDatatype{\mathsf{Sorts}}}
\newcommand{\Ss}{\mathcal{S}}
\newcommand{\SortCat}[1]{\AgdaFunction{\llbracket}\ #1\ \AgdaFunction{\rrbracket}}
\newcommand{\sortsnil}{\AgdaInductiveConstructor{\mathsf{nil}}}
\newcommand{\sortssnoc}{\AgdaInductiveConstructor{\mathsf{snoc}}}

% Spec
\newcommand{\specty}{\AgdaDatatype{\mathsf{Spec}}}
\newcommand{\specnil}{\AgdaInductiveConstructor{\mathsf{nil}}}
\newcommand{\specsnoc}{\AgdaInductiveConstructor{\mathsf{snoc}}}
\newcommand{\Alg}{\AgdaFunction{\mathsf{Alg}}}
\newcommand{\Und}{\AgdaFunction{\mathsf{U}}}

\newcommand{\specaltty}{\AgdaDatatype{\mathsf{Spec'}}}
\newcommand{\specaltiscorrect}{\AgdaFunction{\mathsf{is-correct}}}
\newcommand{\specaltnil}{\AgdaInductiveConstructor{\mathsf{nil}}}
\newcommand{\specaltsnoc}{\AgdaInductiveConstructor{\mathsf{snoc}}}
\newcommand{\Algalt}{\AgdaFunction{\mathsf{Alg'}}}
\newcommand{\Undalt}{\AgdaFunction{\mathsf{U'}}}
